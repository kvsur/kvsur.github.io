---
layout: post
title: "XSS && CSRF"
category: network
---

### XSS (CROSS SITE SCRIPT)

> https://www.zhihu.com/collection/145923418
> https://tech.meituan.com/2018/09/27/fe-security.html

XSS 漏洞通常指的是网站对用户输入的数据未做有效过滤，攻击方可以将恶意脚本注入网站页面中，达到当用户浏览该网站页面的时候执行恶意代码的目的，如盗取用户的cookie信息，破坏页面结构、无脑重定向到其他网站等操作；例如一个Get请求中攻击者将脚本放在某个参数中，服务端未进行过滤，返回该脚本参数，客户端将脚本参数渲染到页面中完成攻击；

**XSS 分类：**

1. 反射型：
反射型XSS 又称为非持久型跨站脚本，做法是将攻击脚本放在URL参数中，而不是存储到服务器，因此多数需要诱导网站用户点击才会触发攻击；

2. 存储型：
存储型XSS 又称为持久型跨站脚本；攻击者通过如 评论、帖子、博客等方式将攻击脚本持久化到服务器数据库中，然后引导用户访问特定页面执行从服务端请求回来渲染好的攻击脚本达到目的；

3. DOM 型
DOM 型XSS 也是反射性 XSS的一种，区别在于 DOM 型XSS 不经过服务端也可完成攻击，将攻击脚本放入URL访问参数中，需要通过 获取URL参数数据进行处理更新到页面的页面拿到攻击脚本后更新到页面就能完成攻击；


XSS 结合 Ajax 技术进行攻击是最常用的方式，一个典型的场景是微博中的蠕虫XSS：
- 利用 XSS 漏洞插入恶意js代码；
- 在恶意代码中 利用Ajax发送请求，如发表微博、关注用户、获取关注的人的关注列表并发送私信给列表中的人
- 发表的微博和 发送的私信都是包含恶意代码的连接，如果用户点击，则又进一步循环攻击，巩固恶意代码的自我复制和传播能力；

**XSS 防御：**

网页页面上任何可以输入的地方如果在使用数据时没有对数据进行过滤处理的话，都可能存在XSS漏洞；漏洞的危险程度取决于攻击代码的威力，攻击代码也不局限于script；
防御XSS攻击最简单直接的方式就是对用户的输入进行过滤：

- 在不需要用户进行HTML输入的时候，直接对用户输入进行HTML转移处理：

### CSRF (CROSS SITE REQUEST FORGERY)

> https://www.zhihu.com/collection/145923418